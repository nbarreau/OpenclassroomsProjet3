"use strict";class Slider{constructor(container,timeout,fadeout,fadein){this.slider=$(container);this.timeout=timeout;this.fadein=fadein;this.fadeout=fadeout;this.slide=this.slider.find(".slide");this.dot=this.slider.find(".dot");this.progressbar=this.slider.find(".progressbar");this.indexSlide=this.slide.length-1;this.i=0;this.activeSlide=this.slide.eq(this.i);this.activeDot=this.dot.eq(this.i);this.next=this.slider.find("#slider-next");this.prev=this.slider.find("#slider-prev");this.pause=this.slider.find("#slider-pause");this.initSettings()};nextSlide(){this.i++;if(this.i>this.indexSlide){this.i=0};this.changeSlide();clearTimeout(this.animation);if(this.pause.children().hasClass("fa-play")){this.progressbar.animate({width:0},0);return}
this.slideLoop();this.progressbar.stop();this.progressbar.css("width",0);this.launchprogressbar()};prevSlide(){this.i--;if(this.i<0){this.i=this.indexSlide};this.changeSlide();clearTimeout(this.animation);if(this.pause.children().hasClass("fa-play")){this.progressbar.animate({width:0},0);return}
this.slideLoop();this.progressbar.stop();this.progressbar.css("width",0);this.launchprogressbar()};slideLoop(){this.animation=setTimeout(()=>{if(this.i<this.indexSlide){this.i++}
else{this.i=0};this.changeSlide();this.slideLoop();this.launchprogressbar()},this.timeout)};changeSlide(){this.activeSlide.fadeOut(this.fadeout);this.activeSlide=this.slide.eq(this.i);this.activeSlide.fadeIn(this.fadein);this.dot.removeClass('dot-active');this.activeDot=this.dot.eq(this.i);this.activeDot.addClass("dot-active")};launchprogressbar(){let percent=this.progressbar.attr("data-percent");this.progressbar.animate({width:percent},this.timeout,"linear",()=>{this.progressbar.css("width",0)})};initSettings(){this.activeSlide.css({display:"block"});this.activeDot.addClass("dot-active");this.launchprogressbar();this.slideLoop();$(window).blur(()=>{clearTimeout(this.animation);this.pause.children(":first").removeClass("fa-pause").addClass("fa-play")});this.next.click((event)=>{this.nextSlide()});this.prev.click((event)=>{this.prevSlide()});this.pause.click((event)=>{if(this.pause.children(":first").hasClass("fa-pause")){clearTimeout(this.animation);this.progressbar.stop();this.pause.children(":first").removeClass("fa-pause").addClass("fa-play")}else if(this.pause.children().hasClass('fa-play')){this.pause.children(":first").removeClass("fa-play").addClass("fa-pause");this.nextSlide()}});this.dot.click((event)=>{if(this.pause.children().hasClass("fa-play")){this.pause.children(":first").removeClass("fa-play").addClass("fa-pause")};this.i=$(event.target).index();this.activeSlide.fadeOut(this.fadeout);this.activeSlide=this.slide.eq(this.i);this.activeSlide.fadeIn(this.fadein);this.dot.removeClass('dot-active');$(event.target).addClass('dot-active');clearTimeout(this.animation);this.slideLoop();this.progressbar.stop();this.progressbar.css("width",0);this.launchprogressbar()});$(document).keyup((touche)=>{let saisie=touche.code||touche.key;if(saisie==="ArrowRight"){this.nextSlide()}
else if(saisie==="ArrowLeft"){this.prevSlide()}
else if(saisie==="Enter"){if(this.pause.children(":first").hasClass("fa-pause")){clearTimeout(this.animation);this.progressbar.stop();this.pause.children(":first").removeClass("fa-pause").addClass("fa-play")}else if(this.pause.children().hasClass('fa-play')){this.pause.children(":first").removeClass("fa-play").addClass("fa-pause");this.nextSlide()}}})}}